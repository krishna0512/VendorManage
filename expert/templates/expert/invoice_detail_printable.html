{% extends 'expert/base.html' %}
{% load static %}

{% block custom_navbar %}
<div class="navbar-nav">
	<a class="btn btn-outline-primary btn-sm mr-1" type="button" href="javascript:window.print();"><i class="fa fa-print"></i> Print</a>
	<a class="btn btn-outline-secondary btn-sm mr-1" type="button" href="{{ invoice.get_absolute_url }}"><i class="fa fa-arrow-left"></i> Back</a>
</div>
{% endblock %}

{% comment %}
TODO: Determine weather the print dialog should be opened on page load or not?
{% block custom_js %}
<script>
    $(document).ready(function() {
        window.print();
    });
</script>
{% endblock %}
{% endcomment %}

{% block main_content %}
<div class="container border">
    <div class="row">
        <div class="col">
            <center><b>Tax Invoice</b></center>
        </div>
    </div>
    <div class="row">
        <div class="col-6">
            <div>
                <div><b>EXPERT TRADERS</b></div>
                <div><small>J-142, Sumel-6, Dhudheshwar, AHM-4 (GUJ)</small></div>
                <div><small class="font-italic"><u>expertcovers2020@gmail.com</u></small></div>
                <div><small>Ph No. 9839085886</small></div>
                <div><small>GSTN: 24AAPPT3833R1ZT / S-Code 24</small></div>
            </div>
        </div>
        <div class="col-2"></div>
        <div class="col-4">
            <table class="table table-bordered table-sm">
                <tr>
                    <td>Invoice No.</td>
                    <td>{{ invoice.number }}</td>
                </tr>
                <tr>
                    <td>Date</td>
                    <td>{{ invoice.date_sent|date:"M j, Y" }}</td>
                </tr>
                <tr>
                    <td>Dispatched Through</td>
                    <td>Tempo</td>
                </tr>
                <tr>
                    <td>Motor V.No.</td>
                    <td>{{ invoice.motor_vehicle_number }}</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-6">
            <div>
                <div><b>To, Caterpillar Signs PVT LTD (100% EOU)</b></div>
                <div><small>C-10, Electronics Estate, Sector-25, Gandhinagar</small></div>
                <div><small>Gandhinagar-382024 (Guj.), S-Code 24</small></div>
                <div><small>GSTN: 24AAECC4258M1ZH, IEC: 0811008479</small></div>
            </div>
        </div>
        <div class="col-2"></div>
        <div class="col-4">
            <table class="table table-sm table-bordered">
                <tr>
                    <td>Destination</td>
                    <td>{{ invoice.destination }}</td>
                </tr>
                <tr>
                    <td>Supplier's Ref</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Mode of Payment</td>
                    <td>7 Days</td>
                </tr>
                <tr>
                    <td>EWay Bill No.</td>
                    <td></td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div>
                Stiching Job Work on your Material as per details mentioned hereunder
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <table class="table table-sm table-bordered text-center">
                <thead>
                    <tr>
                        <th>Challan No.</th>
                        <th>Date</th>
                        <th>HSN/SAC</th>
                        <th>PCS.</th>
                        <th>Max-380</th>
                        <th>Tuff-560</th>
                        <th>Fab</th>
                        <th>Total Sq.Ft.</th>
                        <th>Rate/Sq.Ft.</th>
                        <th>Total Amt.</th>
                    </tr>
                </thead>
                <tbody>
                    
                    {% for challan in invoice.challans.all %}
                        <tr>
                            <td>{{ challan.number }}</td>
                            <td>{{ challan.date_sent|date:"d.m.y" }}</td>
                            <td>998822</td>
                            <td>{{ challan.get_total_quantity }}</td>
                            <td>{{ challan.get_total_size_by_fabric.max }}</td>
                            <td>{{ challan.get_total_size_by_fabric.tuff }}</td>
                            <td>{{ challan.get_total_size_by_fabric.fab }}</td>
                            <td>{{ challan.get_total_size }}</td>
                            <td>3.5</td>
                            <td>{{ challan.get_total_value }}</td>
                        </tr>
                    {% endfor %}
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td></td>
                        <td>Total</td>
                        <td></td>
                        <td>{{ invoice.get_total_quantity }}</td>
                        <td>{{ invoice.get_total_size_by_fabric.max }}</td>
                        <td>{{ invoice.get_total_size_by_fabric.tuff }}</td>
                        <td>{{ invoice.get_total_size_by_fabric.fab }}</td>
                        <td>{{ invoice.get_total_size }}</td>
                        <td></td>
                        <td>{{ invoice.get_total_value }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td colspan="3">Add: CGST</td>
                        <td>6%</td>
                        <td>{{ invoice.get_total_tax.cgst }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td colspan="3">Add: SGST</td>
                        <td>6%</td>
                        <td>{{ invoice.get_total_tax.sgst }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td colspan="3">Add: Round off</td>
                        <td></td>
                        <td>{{ invoice.get_total_tax.roundoff }}</td>
                    </tr>
                    <tr>
                        <td colspan="9">
                            Amount Chargeble (in words)<br>
                            <b>{{ invoice.get_total_amount.words }}</b>
                        </td>
                        <td>{{ invoice.get_total_amount.amount }}</td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col">
            <table class="table table-sm table-bordered text-center">
                <tr>
                    <td rowspan="2">HSN/SAC</td>
                    <td rowspan="2">Taxable Value</td>
                    <td colspan="2">Central Tax</td>
                    <td colspan="2">State Tax</td>
                    <td rowspan="2">Total Tax Amount</td>
                </tr>
                <tr>
                    <td>Rate</td>
                    <td>Amount</td>
                    <td>Rate</td>
                    <td>Amount</td>
                </tr>
                <tr>
                    <td>998822</td>
                    <td>{{ invoice.get_total_value }}</td>
                    <td>6%</td>
                    <td>{{ invoice.get_total_tax.cgst }}</td>
                    <td>6%</td>
                    <td>{{ invoice.get_total_tax.sgst }}</td>
                    <td rowspan="2">{{ invoice.get_total_tax.total }}</td>
                </tr>
                <tr>
                    <td>Total</td>
                    <td>{{ invoice.get_total_value }}</td>
                    <td></td>
                    <td>{{ invoice.get_total_tax.cgst }}</td>
                    <td></td>
                    <td>{{ invoice.get_total_tax.sgst }}</td>
                </tr>
                <tr>
                    <td colspan="7">
                        Tax Amount (in words)<br>
                        <b>{{ invoice.get_total_tax.total_words }}</b>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <small>
                DECLARATION: We declared that this invoice shows the actual prince of the goods described and that all particulars are true and correct to best of our knowledge.
            </small>
        </div>
        <div class="col text-center">
            <div>For Expert Traders</div>
        </div>
    </div>
    <div class="row">
        <div class="col small">
            <div>Bank Details > Expert Traders</div>
            <div>Union Bank of India, IFSC: UBIN0548936</div>
            <div>A/C No. 489301010033569</div>
            <div>PAN No. AAPPT3833R</div>
        </div>
        <div class="col text-center small">
            <div>Subject to Ahmedabad Jurisdication</div>
            <div>This is a Computer Generated Invoice</div>
        </div>
    </div>
</div>
{% endblock %}
