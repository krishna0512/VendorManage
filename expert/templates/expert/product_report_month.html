{% extends 'expert/base.html' %}
{% load static %}

{% block main_content %}
<div class="container-fluid mt-3">
	<center class="my-4 h2">{{ month|date:"F Y" }}</center>
	{# TODO: Add the if condition for previous_month and next_month #}
	<div class="row my-2">
		<div class="col text-left">
			<a href="{% url 'expert:report-monthly' previous_month|date:'Y' previous_month|date:'M' %}" class="btn btn-outline-info"><< {{ previous_month|date:"F Y" }}</a>
		</div>
		<div class="col text-right">
			<a href="{% url 'expert:report-monthly' next_month|date:'Y' next_month|date:'M' %}" class="btn btn-outline-info">{{ next_month|date:"F Y" }} >></a>
		</div>
	</div>
	<table class="table table-striped table-sm table-hover">
		<thead>
			<tr>
				<th><a href="#" class="btn btn-link">Date</a></th>
				{% for worker in worker_list %}
				<th class="text-center"><a href="{{ worker.get_absolute_url }}" class="btn btn-link">{{ worker.get_fullname }}</a></th>
				{% endfor %}
				<th class="text-center"><a href="#" class="btn btn-link">Total</a></th>
			</tr>
		</thead>
		<tbody>
			{% for date_object in date_list %}
			<tr>
				<th><a href="{% url 'expert:report-daily' month|date:'Y' month|date:'M' date_object.date.day %}">{{ date_object.date }}</a></th>
				{% for wc in date_object.contributions %}
				{% if wc %}
				<td class="text-center {% if forloop.last %}bg-dark text-light{% endif %}">{{ wc|floatformat:2 }}</td>
				{% else %}
				<td class="text-muted small text-center">0</td>
				{% endif %}
				{% endfor %}
			</tr>
			{% endfor %}
		</tbody>
		<tfoot>
			<tr class="bg-dark text-light">
				<th>Total</th>
				{% for w in worker_total %}
				<th class="text-center">{{ w|floatformat:2 }}</th>
				{% endfor %}
			</tr>
		</tfoot>
	</table>
	{% comment %}
	<ul>
		{% for product in object_list %}
		<li>{{ product.date_completed|date:"F j, Y" }}: {{ product.order_number }}</li>
		{% endfor %}
	</ul>
	{% endcomment %}
</div>
{% endblock %}
